(function(e){function t(t){for(var r,o,s=t[0],l=t[1],c=t[2],u=0,v=[];u<s.length;u++)o=s[u],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&v.push(n[o][0]),n[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);d&&d(t);while(v.length)v.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],r=!0,o=1;o<a.length;o++){var l=a[o];0!==n[l]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=a[0]))}return e}var r={},n={app:0},i=[];function o(e){return s.p+"js/"+({pdfjsWorker:"pdfjsWorker"}[e]||e)+"."+{pdfjsWorker:"dcd3b2b3"}[e]+".js"}function s(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.e=function(e){var t=[],a=n[e];if(0!==a)if(a)t.push(a[2]);else{var r=new Promise((function(t,r){a=n[e]=[t,r]}));t.push(a[2]=r);var i,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=o(e);var c=new Error;i=function(t){l.onerror=l.onload=null,clearTimeout(u);var a=n[e];if(0!==a){if(a){var r=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+r+": "+i+")",c.name="ChunkLoadError",c.type=r,c.request=i,a[1](c)}n[e]=void 0}};var u=setTimeout((function(){i({type:"timeout",target:l})}),12e4);l.onerror=l.onload=i,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(a,r,function(t){return e[t]}.bind(null,r));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var d=c;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("cd49")},1:function(e,t){},"1276a":function(e,t,a){},2:function(e,t){},3:function(e,t){},4:function(e,t){},"5c64":function(e,t,a){"use strict";var r=a("dfa5"),n=a.n(r);n.a},b107:function(e,t,a){"use strict";var r=a("dbb7"),n=a.n(r);n.a},b14c:function(e,t,a){"use strict";var r=a("1276a"),n=a.n(r);n.a},cd49:function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-navigation-drawer",{attrs:{clipped:e.$vuetify.breakpoint.mdAndUp,app:""},scopedSlots:e._u([{key:"append",fn:function(){return[a("v-divider"),a("v-list",{attrs:{nav:"",dense:""}},[a("settings-dialog",{attrs:{servers:e.servers,current:e.current()},on:{save:e.serverchange,delete:e.serverremove}}),e._l(e.navItems,(function(t){return[t.children?a("v-list-group",{key:t.text,attrs:{disabled:t.disabled,"prepend-icon":t.icon||" ","no-action":""},scopedSlots:e._u([{key:"activator",fn:function(){return[a("v-list-item-content",[a("v-list-item-title",[e._v(e._s(t.text))])],1)]},proxy:!0}],null,!0),model:{value:t.model,callback:function(a){e.$set(t,"model",a)},expression:"item.model"}},e._l(t.children,(function(t,r){return a("v-list-item",{key:r,attrs:{dense:"",disabled:t.disabled,href:t.href,link:""}},[t.icon?a("v-list-item-action",[a("v-icon",[e._v(e._s(t.icon))])],1):e._e(),a("v-list-item-content",[a("v-list-item-title",[e._v(e._s(t.text))])],1)],1)})),1):t.hide?e._e():a("v-list-item",{key:t.text,attrs:{disabled:t.disabled,href:t.href,link:""}},[a("v-list-item-action",[a("v-icon",[e._v(e._s(t.icon))])],1),a("v-list-item-content",[a("v-list-item-title",[e._v(e._s(t.text))])],1)],1)]})),e.currentserver()?a("v-list-item",{attrs:{disabled:"","stwo-line":""}},[a("v-list-item-content",[a("v-list-item-subtitle",[e._v(e._s(e.currentserver().url))])],1)],1):e._e()],2)]},proxy:!0}]),model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[a("tag-list",{attrs:{reload:e.reload,getDocuments:e.getDocuments,error:e.onError,deleteTag:e.deleteTag,currentserver:e.currentserver,tags:e.tags,search:e.search},on:{"update:search":function(t){e.search=t}}})],1),a("v-app-bar",{attrs:{"clipped-left":!0,app:"",color:"primary",flat:e.$vuetify.breakpoint.mdAndUp,dark:""}},[a("v-app-bar-nav-icon",{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),a("v-toolbar-title",{staticClass:"hidden-sm-and-down",staticStyle:{width:"300px"}},[e._v(" tridoc Cockpit ")]),a("v-spacer"),a("v-tooltip",{attrs:{bottom:"","open-on-focus":"","open-delay":"1000"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,n=t.attrs;return[a("v-text-field",e._g(e._b({attrs:{flat:"","solo-inverted":"","hide-details":"",clearable:"","clear-icon":"mdi-filter-remove","prepend-inner-icon":"mdi-magnify",label:"Search"},on:{change:e.getDocuments,"click:clear":function(t){e.search="",e.reload()}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},"v-text-field",n,!1),r))]}}])},[e._v(" Search for tags with "),a("kbd",[e._v("#tag")]),a("br"),e._v(" Exclude tags with "),a("kbd",[e._v("##tag")]),a("br"),e._v(" Search for a literal # with "),a("kbd",[e._v("\\#")])]),a("v-btn",{attrs:{icon:""},on:{click:e.reload}},[a("v-icon",[e._v("mdi-refresh")])],1),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(t){e.$vuetify.theme.dark=!e.$vuetify.theme.dark}}},[a("v-icon",[e._v("mdi-invert-colors")])],1)],1),a("v-content",{attrs:{app:""}},[a("v-container",{staticClass:"sfill-height",attrs:{fluid:""},on:{drag:function(e){e.stopPropagation(),e.preventDefault()},dragstart:function(e){e.stopPropagation(),e.preventDefault()},dragend:function(e){e.stopPropagation(),e.preventDefault()},dragover:function(e){e.stopPropagation(),e.preventDefault()},dragenter:function(e){e.stopPropagation(),e.preventDefault()},dragleave:function(e){e.stopPropagation(),e.preventDefault()},drop:function(t){return t.stopPropagation(),t.preventDefault(),e.addFile(t)}}},[a("v-row",{attrs:{align:"start"}},[a("v-col",{attrs:{cols:"12"}},[a("v-card",{attrs:{outlined:""}},[e._l(e.docs,(function(t){return a("document-details",{key:t.identifier,attrs:{server:e.currentserver,docMeta:t,error:e.error,open:e.open===t.identifier},on:{"update:docMeta":e.updateDoc,change:e.reload,"update:open":function(t){e.open=""}}})})),a("v-data-table",{attrs:{"disable-sort":"","disable-filtering":"",headers:e.headers,items:e.docs,options:e.options,"server-items-length":e.count,loading:e.loading,"item-key":"identifier","no-data-text":"No documents found","hide-default-footer":""},on:{"click:row":function(t){return e.open=t.identifier}},scopedSlots:e._u([{key:"item.title",fn:function(t){var r=t.item;return[e._v(" "+e._s(r.title)+" "),r.title?e._e():a("i",[e._v("Untitled Document")])]}},{key:"item.tags",fn:function(t){var r=t.item;return[a("div",{style:e.$vuetify.breakpoint.mdAndUp?"max-width:40vw;":"max-width:80vw;"},[a("v-chip-group",{attrs:{"show-arrows":e.$vuetify.breakpoint.mdAndUp,dcolumn:!e.$vuetify.breakpoint.mdAndUp,column:""}},e._l(r.tags,(function(t){return a("v-chip",{key:t.label+(t.parameter?t.parameter.value:""),attrs:{label:""}},[".."===t.label?a("v-icon",[e._v("mdi-sync")]):a("span",[e._v(e._s(t.label))]),t.parameter?a("v-divider",{staticClass:"mx-3",attrs:{vertical:""}}):e._e(),t.parameter?a("strong",[e._v(e._s("http://www.w3.org/2001/XMLSchema#decimal"===t.parameter.type?t.parameter.value:e.calculateDatestamp(t.parameter.value)))]):e._e()],1)})),1)],1)]}},{key:"item.created",fn:function(t){var a=t.item;return[e._v(" "+e._s(e.calculateTimestamp(a.created))+" ")]}},{key:"item.identifier",fn:function(t){var r=t.item;return[a("pre",[e._v(e._s(r.identifier))])]}},{key:"item.actions",fn:function(t){var r=t.item;return[a("div",{staticClass:"d-flex"},[a("v-btn",{staticClass:"ma-1",attrs:{outlined:"",text:"",small:"",color:"primary darken-1",link:""},on:{click:function(t){return t.stopPropagation(),e.openDocument(r.identifier)}}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-open-in-new")])],1),a("v-btn",{staticClass:"ma-1",attrs:{small:"",color:"primary"},on:{click:function(t){t.stopPropagation(),e.open=r.identifier}}},[a("v-icon",{attrs:{small:"",left:!e.$vuetify.breakpoint.sm}},[e._v("mdi-file-eye-outline")]),a("span",{attrs:{hidden:e.$vuetify.breakpoint.sm}},[e._v("Open")])],1)],1)]}}])})],2)],1)],1),a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{cols:"auto",align:"center"}},[a("v-btn",{staticClass:"ma-2",attrs:{disabled:e.options.page<2,outlined:"",text:"",fab:"",small:""},on:{click:function(t){return e.paginationFirst()}}},[a("v-icon",[e._v("mdi-page-first")])],1),a("v-btn",{staticClass:"ma-2",attrs:{disabled:e.options.page<2,outlined:"",text:"",fab:"",small:""},on:{click:function(t){return e.paginationPrev()}}},[a("v-icon",[e._v("mdi-chevron-left")])],1),a("span",{staticClass:"ma-2"},[e._v(" "+e._s(e.docscounter())+" ")]),a("span",{staticClass:"ma-2"},[e._v(" page "+e._s(e.pagecounter())+" ")]),a("v-btn",{staticClass:"ma-2",attrs:{disabled:e.options.page*e.options.itemsPerPage>=e.count,outlined:"",text:"",fab:"",small:""},on:{click:function(t){return e.paginationNext()}}},[a("v-icon",[e._v("mdi-chevron-right")])],1),a("v-btn",{staticClass:"ma-2",attrs:{disabled:e.options.page*e.options.itemsPerPage>=e.count,outlined:"",text:"",fab:"",small:""},on:{click:function(t){return e.paginationLast()}}},[a("v-icon",[e._v("mdi-page-last")])],1)],1)],1),a("v-row",{attrs:{align:"start"}},[a("v-col",{attrs:{cols:"12"}},[a("v-card",{attrs:{outlined:""}},[a("v-data-table",{attrs:{"disable-sort":"","disable-filtering":"",headers:e.uploadHeaders,items:e.uploadDocs,"item-key":"file.name","disable-pagination":"","hide-default-footer":"","hide-default-header":"","no-data-text":"Drop documents here to upload"},scopedSlots:e._u([{key:"item.actions",fn:function(t){var r=t.item;return[a("div",{staticClass:"d-flex"},[a("v-btn",{staticClass:"ma-1",attrs:{small:"",text:"",outlined:"",color:"primary darken-1",loading:r.loading},on:{click:function(t){return e.uploadDocument(r)}}},[a("v-icon",{attrs:{small:"",left:!e.$vuetify.breakpoint.sm}},[e._v("mdi-upload")]),a("span",{attrs:{hidden:e.$vuetify.breakpoint.sm}},[e._v("Upload")])],1),a("v-btn",{staticClass:"ma-1",attrs:{small:"",text:"",outlined:"",color:"secondary darken-1"},on:{click:function(t){return e.removeUploadDocument(r)}}},[a("v-icon",{attrs:{small:"",left:!e.$vuetify.breakpoint.sm}},[e._v("mdi-close")]),a("span",{attrs:{hidden:e.$vuetify.breakpoint.sm}},[e._v("Cancel")])],1)],1)]}},{key:"footer",fn:function(){return[a("v-divider"),a("div",{staticClass:"d-flex"},[a("v-btn",{staticClass:"ma-1",attrs:{outlined:"",color:"primary"}},[a("span",[e._v("Add File")]),a("input",{attrs:{type:"file"},on:{change:e.addFileInput}})]),a("v-spacer"),a("v-btn",{staticClass:"ma-1",attrs:{outlined:"",color:"primary",disabled:0===e.uploadDocs.length},on:{click:e.uploadAll}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-upload")]),a("span",[e._v("Upload All")])],1)],1)]},proxy:!0}])})],1)],1)],1)],1)],1),a("error-dialog",{attrs:{error:e.error,close:function(){return e.error=null}}})],1)},i=[],o=(a("99af"),a("4de4"),a("c740"),a("4160"),a("baa5"),a("d81d"),a("a434"),a("b0c0"),a("d3b7"),a("ac1f"),a("25f0"),a("4d90"),a("5319"),a("841c"),a("2ca0"),a("498a"),a("159b"),a("5530")),s=a("2909"),l=a("d4ec"),c=a("bee2"),u=a("99de"),d=a("7e84"),v=a("262e"),p=a("9ab4"),f=a("60a3"),m=a("73a1"),h=a.n(m),b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{fullscreen:e.$vuetify.breakpoint.smAndDown},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-list-item",e._g({},r),[a("v-list-item-icon",[a("v-icon",[e._v("mdi-cog")])],1),a("v-list-item-content",[a("v-list-item-title",[e._v("Settings")])],1)],1)]}}]),model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("v-card",{attrs:{tile:e.$vuetify.breakpoint.smAndDown}},[e.$vuetify.breakpoint.smAndDown?a("v-toolbar",{attrs:{dark:"",color:"primary",flat:"","elevate-on-scroll":""}},[a("v-btn",{attrs:{icon:"",dark:""},on:{click:function(t){e.show=!1}}},[a("v-icon",[e._v("mdi-close")])],1),a("v-toolbar-title",[e._v("Settings")]),a("v-spacer"),a("v-toolbar-items",[a("v-btn",{attrs:{dark:"",text:""},on:{click:function(t){e.show=!1}}},[e._v("Close")])],1)],1):e._e(),a("v-card-title",[e.$vuetify.breakpoint.mdAndUp?a("span",{staticClass:"headline"},[e._v("Settings")]):e._e()]),a("v-card-text",[a("v-expansion-panels",{attrs:{accordion:""},model:{value:e.icurrent,callback:function(t){e.icurrent=t},expression:"icurrent"}},e._l(e.iservers,(function(t,r){return a("v-expansion-panel",{key:t.id,ref:1e3*(t.id+1)+r+1,refInFor:!0},[a("v-expansion-panel-header",{attrs:{"disable-icon-rotate":r===e.current},scopedSlots:e._u([r===e.current?{key:"actions",fn:function(){return[a("v-icon",{attrs:{color:"primary"}},[e._v("mdi-check-circle")])]},proxy:!0}:null],null,!0)},[e._v(" "+e._s(r+1)+": "+e._s(t.url)+" ")]),a("v-expansion-panel-content",[a("v-form",{model:{value:t.valid,callback:function(a){e.$set(t,"valid",a)},expression:"server.valid"}},[a("v-row",[a("v-col",{attrs:{sm:"12",md:"6"}},[a("v-text-field",{attrs:{outlined:"","full-width":"",rules:e.urlRules,label:"Server URL",required:""},model:{value:t.url,callback:function(a){e.$set(t,"url",a)},expression:"server.url"}})],1),a("v-col",{attrs:{sm:"12",md:"6"}},[a("v-text-field",{attrs:{outlined:"","full-width":"",rules:e.passwordRules,label:"Password",required:""},model:{value:t.password,callback:function(a){e.$set(t,"password",a)},expression:"server.password"}})],1)],1),a("v-row",[a("v-spacer"),a("v-col",{attrs:{sm:"auto"}},[a("v-btn",{attrs:{color:"secondary darken-1",text:""},on:{click:function(t){return e.remove(r)}}},[e._v("Delete")])],1),a("v-col",{attrs:{sm:"auto"}},[a("v-btn",{attrs:{color:"primary"},on:{click:function(a){return e.save(r,t)}}},[e._v("Save")])],1)],1)],1)],1)],1)})),1),a("v-row",[a("v-spacer"),a("v-col",{attrs:{sm:"auto"}},[a("v-btn",{attrs:{color:"primary darken-1",text:""},on:{click:e.addRow}},[e._v("Add")])],1)],1),a("v-divider")],1),e.$vuetify.breakpoint.mdAndUp?a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"secondary darken-1",text:""},on:{click:function(t){e.show=!1}}},[e._v("Close")])],1):e._e()],1)],1)},g=[],y=(a("3ca3"),a("ddb0"),a("2b3d"),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e.startsWith("http://")&&e.startsWith("https://")||(e="https://"+e);try{var t=new URL(e);return t.href.replace(/\/$/,"")}catch(a){return!1}}),k=function(){var e=0;return function(){return e++}}(),_=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.iservers=e.servers.map((function(t){var a=t.password,r=t.url;return{id:e.counter(),valid:!1,password:a,url:r}})),e.icurrent=e.current,e.show=!1,e.valid=!1,e.urlRules=[function(e){return!!e||"URL is required"},function(e){var t=y(e);return!!t||"URL has to be valid"}],e.passwordRules=[function(e){return!!e||"Password is required"}],e}return Object(v["a"])(t,e),Object(c["a"])(t,[{key:"onServersChanged",value:function(){var e=this;this.iservers=this.servers.map((function(t){var a=t.password,r=t.url;return{id:e.counter(),valid:!1,password:a,url:r}}))}},{key:"counter",value:function(){return k()}},{key:"save",value:function(e,t){var a=t.url,r=t.password,n=t.valid;n&&this.$emit("save",{index:e,url:a,password:r})}},{key:"remove",value:function(e){this.$emit("delete",e)}},{key:"addRow",value:function(){this.iservers.push({id:this.counter(),password:"",url:"",valid:!1}),this.icurrent=this.iservers.length-1,this.save(this.icurrent,{password:"",url:"",valid:!0})}}]),t}(f["d"]);Object(p["a"])([Object(f["b"])()],_.prototype,"servers",void 0),Object(p["a"])([Object(f["e"])("servers",{deep:!0})],_.prototype,"onServersChanged",null),Object(p["a"])([Object(f["b"])()],_.prototype,"current",void 0),_=Object(p["a"])([Object(f["a"])({})],_);var w=_,x=w,O=a("2877"),j=a("6544"),V=a.n(j),C=a("8336"),T=a("b0af"),S=a("99d9"),D=a("62ad"),$=a("169a"),P=a("ce7e"),M=a("cd55"),A=a("49e2"),I=a("c865"),L=a("0393"),E=a("4bd4"),R=a("132d"),F=a("da13"),U=a("5d23"),z=a("34c3"),N=a("0fd9"),Y=a("2fa4"),q=a("8654"),W=a("71d9"),B=a("2a7f"),G=Object(O["a"])(x,b,g,!1,null,null,null),H=G.exports;V()(G,{VBtn:C["a"],VCard:T["a"],VCardActions:S["a"],VCardText:S["c"],VCardTitle:S["d"],VCol:D["a"],VDialog:$["a"],VDivider:P["a"],VExpansionPanel:M["a"],VExpansionPanelContent:A["a"],VExpansionPanelHeader:I["a"],VExpansionPanels:L["a"],VForm:E["a"],VIcon:R["a"],VListItem:F["a"],VListItemContent:U["a"],VListItemIcon:z["a"],VListItemTitle:U["c"],VRow:N["a"],VSpacer:Y["a"],VTextField:q["a"],VToolbar:W["a"],VToolbarItems:B["a"],VToolbarTitle:B["b"]});var X=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{value:!!e.error}},[a("v-card",{attrs:{color:"error",dark:""}},[a("v-card-title",{staticClass:"headline"},[e._v(e._s(e.title))]),a("v-card-text",[e._v(e._s(e.message))]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:""},on:{click:e.close}},[e._v(" Close ")])],1)],1)],1)},J=[],Z=function(e){function t(){return Object(l["a"])(this,t),Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments))}return Object(v["a"])(t,e),Object(c["a"])(t,[{key:"title",get:function(){return null!==this.error?this.error.title||"An Error Occured":"..."}},{key:"message",get:function(){return null!==this.error?this.error.message||"Unknown error":"..."}}]),t}(f["d"]);Object(p["a"])([Object(f["b"])()],Z.prototype,"error",void 0),Object(p["a"])([Object(f["b"])()],Z.prototype,"close",void 0),Z=Object(p["a"])([Object(f["a"])({})],Z);var K=Z,Q=K,ee=Object(O["a"])(Q,X,J,!1,null,null,null),te=ee.exports;V()(ee,{VBtn:C["a"],VCard:T["a"],VCardActions:S["a"],VCardText:S["c"],VCardTitle:S["d"],VDialog:$["a"],VSpacer:Y["a"]});var ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-list",{attrs:{nav:"",dense:""}},[a("v-subheader",[e._v("TAGS")]),a("v-list-item-group",{attrs:{color:"secondary"}},[a("tag-creator",{attrs:{server:e.currentserver()},on:{tagcreated:e.reload,error:function(t){return e.error({title:e.r.error,message:e.r.message})}}}),e._l(e.tags,(function(t){return a("v-list-item",{key:t.label},[a("v-list-item-icon",[a("v-icon",{domProps:{textContent:e._s(t["type-icon"]||t.icon)}})],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:e._s(t.label)}})],1),a("v-menu",{attrs:{absolute:"","offset-y":"","max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-list-item-action",e._g({},r),[a("v-icon",{attrs:{small:""}},[e._v("mdi-dots-vertical")])],1)]}}],null,!0)},[a("v-list",e._l(e.tagActions,(function(r,n){return a("v-list-item",{key:n,on:{click:function(){return r.fn(t)}}},[a("v-list-item-title",[e._v(e._s(r.name))])],1)})),1)],1)],1)}))],2)],1)},re=[],ne=(a("4d63"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{fullscreen:e.$vuetify.breakpoint.smAndDown,persistent:"","max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-list-item",e._g({staticClass:"secondary white--text"},r),[a("v-list-item-icon",[a("v-icon",{staticClass:"white--text"},[e._v("mdi-tag-plus")])],1),a("v-list-item-content",[a("v-list-item-title",{staticClass:"white--text"},[e._v("Create Tag")])],1)],1)]}}]),model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Create Tag")])]),a("v-card-text",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{outlined:"",rules:e.labelRules,label:"Label",required:""},model:{value:e.label,callback:function(t){e.label=t},expression:"label"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-radio-group",{model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[a("v-radio",{attrs:{value:"simple"},scopedSlots:e._u([{key:"label",fn:function(){return[a("v-icon",{attrs:{small:"",left:""}},[e._v("mdi-tag")]),e._v(" Not parameterizable ")]},proxy:!0}])}),a("v-radio",{attrs:{value:"decimal"},scopedSlots:e._u([{key:"label",fn:function(){return[a("v-icon",{attrs:{small:"",left:""}},[e._v("mdi-pound")]),e._v(" Parameterizable with number / decimal ")]},proxy:!0}])}),a("v-radio",{attrs:{value:"date"},scopedSlots:e._u([{key:"label",fn:function(){return[a("v-icon",{attrs:{small:"",left:""}},[e._v("mdi-calendar")]),e._v(" Parameterizable with date ")]},proxy:!0}])})],1)],1)],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"secondary darken-1",text:""},on:{click:e.clear}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"secondary darken-1",text:""},on:{click:function(t){e.show=!1}}},[e._v("Close")]),a("v-btn",{attrs:{color:"primary darken-1",text:""},on:{click:e.save}},[e._v("Save")])],1)],1)],1)}),ie=[],oe=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.show=!1,e.valid=!1,e.label="",e.type="simple",e.labelRules=[function(e){return!!e||"Label is required"},function(e){return!/\s|\/|\\|#|"|'|,|;|:|\?/.test(e)||"The label must not contain any of the following: whitespace / \\ # \" ' , ; : ?"},function(e){return!/^[.]{1,2}$/.test(e)||"The label must not equal . (single dot) or .. (double dot)"}],e}return Object(v["a"])(t,e),Object(c["a"])(t,[{key:"clear",value:function(){this.show=!1,this.label="",this.type="simple",this.$refs.form.resetValidation()}},{key:"save",value:function(){var e=this;this.$refs.form.validate(),this.valid&&this.server.createTag(this.label,"simple"!==this.type?this.type:void 0).then((function(t){t.error?(e.$emit("error",t),e.clear()):(e.$emit("tagcreated"),e.clear())}))}}]),t}(f["d"]);Object(p["a"])([Object(f["b"])()],oe.prototype,"server",void 0),oe=Object(p["a"])([Object(f["a"])({})],oe);var se=oe,le=se,ce=a("a523"),ue=a("67b6"),de=a("43a6"),ve=Object(O["a"])(le,ne,ie,!1,null,null,null),pe=ve.exports;V()(ve,{VBtn:C["a"],VCard:T["a"],VCardActions:S["a"],VCardText:S["c"],VCardTitle:S["d"],VCol:D["a"],VContainer:ce["a"],VDialog:$["a"],VForm:E["a"],VIcon:R["a"],VListItem:F["a"],VListItemContent:U["a"],VListItemIcon:z["a"],VListItemTitle:U["c"],VRadio:ue["a"],VRadioGroup:de["a"],VRow:N["a"],VSpacer:Y["a"],VTextField:q["a"]});var fe=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.searchstring=e.search,e.menu={},e.x=0,e.y=0,e.tagActions=[{name:"Add to search",fn:function(t){return e.addToSearch(t.label)}},{name:"Exclude from search",fn:function(t){return e.excludeFromSearch(t.label)}},{name:"Delete",fn:function(t){return e.deleteTag(t.label)}}],e}return Object(v["a"])(t,e),Object(c["a"])(t,[{key:"chSearch",value:function(e){this.searchstring=e}},{key:"chSearchstring",value:function(e){this.$emit("update:search",e)}},{key:"showMenu",value:function(e,t){e.value=!0,this.x=t.clientX,this.x=t.clientY}},{key:"addToSearch",value:function(e){this.searchstring?(this.searchstring=this.searchstring.replace(new RegExp("(^|[^\\\\])##?"+e+"\\b","g"),""),this.searchstring+=" #"+e):this.searchstring="#"+e,this.$nextTick(this.getDocuments)}},{key:"excludeFromSearch",value:function(e){this.searchstring?(this.searchstring=this.searchstring.replace(new RegExp("(^|[^\\\\])##?"+e+"\\b","g"),""),this.searchstring+=" ##"+e):this.searchstring="##"+e,this.$nextTick(this.getDocuments)}}]),t}(f["d"]);Object(p["a"])([Object(f["b"])()],fe.prototype,"reload",void 0),Object(p["a"])([Object(f["b"])()],fe.prototype,"getDocuments",void 0),Object(p["a"])([Object(f["b"])()],fe.prototype,"error",void 0),Object(p["a"])([Object(f["b"])()],fe.prototype,"deleteTag",void 0),Object(p["a"])([Object(f["b"])()],fe.prototype,"currentserver",void 0),Object(p["a"])([Object(f["b"])()],fe.prototype,"tags",void 0),Object(p["a"])([Object(f["b"])()],fe.prototype,"search",void 0),Object(p["a"])([Object(f["e"])("search")],fe.prototype,"chSearch",null),Object(p["a"])([Object(f["e"])("searchstring")],fe.prototype,"chSearchstring",null),fe=Object(p["a"])([Object(f["a"])({components:{TagCreator:pe}})],fe);var me=fe,he=me,be=a("8860"),ge=a("1800"),ye=a("1baa"),ke=a("e449"),_e=a("e0c7"),we=Object(O["a"])(he,ae,re,!1,null,null,null),xe=we.exports;V()(we,{VIcon:R["a"],VList:be["a"],VListItem:F["a"],VListItemAction:ge["a"],VListItemContent:U["a"],VListItemGroup:ye["a"],VListItemIcon:z["a"],VListItemTitle:U["c"],VMenu:ke["a"],VSubheader:_e["a"]});var Oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{value:e.show,scrollable:"",fullscreen:""}},[a("v-card",{attrs:{tile:""}},[a("v-toolbar",{staticStyle:{flex:"0"},attrs:{dark:"",color:"primary",flat:"","elevate-on-scroll":""}},[a("v-btn",{attrs:{icon:"",dark:""},on:{click:function(t){e.show=!1}}},[a("v-icon",[e._v("mdi-close")])],1),a("v-toolbar-title",[e._v(e._s(e.meta.title||e.meta.identifier))]),a("v-spacer"),a("v-btn",{attrs:{icon:e.$vuetify.breakpoint.smAndDown,text:"",dark:""},on:{click:function(t){return e.openDocument(e.meta.identifier)}}},[a("v-icon",{attrs:{left:!e.$vuetify.breakpoint.smAndDown}},[e._v("mdi-open-in-new")]),a("span",{attrs:{hidden:e.$vuetify.breakpoint.smAndDown}},[e._v("Open in new tab")])],1),a("v-btn",{attrs:{icon:e.$vuetify.breakpoint.smAndDown,text:"",dark:"",color:"red accent-1"},on:{click:function(t){return e.deleteDocument(e.meta.identifier)}}},[a("v-icon",{attrs:{left:!e.$vuetify.breakpoint.smAndDown}},[e._v("mdi-delete")]),a("span",{attrs:{hidden:e.$vuetify.breakpoint.smAndDown}},[e._v("Delete this document")])],1)],1),a("v-card-text",[a("v-row",[a("v-col",{attrs:{cols:"12",md:"5"}},[a("v-card-title",{staticClass:"px-0 text--primary"},[e._v(" Metadata ")]),a("v-card-subtitle",{staticClass:"px-0 mb-6"},[a("kbd",[e._v(e._s(e.docMeta.identifier))])]),a("v-text-field",{attrs:{outlined:"",label:"Title"},on:{change:e.updateTitle},model:{value:e.meta.title,callback:function(t){e.$set(e.meta,"title",t)},expression:"meta.title"}}),a("v-chip-group",{staticClass:"mb-8",attrs:{column:""}},[a("tag-adder",{attrs:{meta:e.meta,server:e.server},on:{"update:meta":function(t){return e.$emit("update:docMeta",t)}}}),e._l(e.meta.tags,(function(t){return a("v-chip",{key:t.label+(t.parameter?t.parameter.value:""),attrs:{label:""}},[".."===t.label?a("v-icon",[e._v("mdi-sync")]):a("span",[e._v(e._s(t.label))]),t.parameter?a("v-divider",{staticClass:"mx-3",attrs:{vertical:""}}):e._e(),t.parameter?a("strong",[e._v(e._s("http://www.w3.org/2001/XMLSchema#decimal"===t.parameter.type?t.parameter.value:e.calculateDatestamp(t.parameter.value)))]):e._e()],1)}))],2),a("comments-list",{attrs:{server:e.server,meta:e.meta},on:{"update:meta":function(t){return e.$emit("update:docMeta",t)}}})],1),a("v-col",{attrs:{cols:"12",md:"7"}},[a("v-toolbar",{staticClass:"tools",attrs:{fdense:""}},[a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:e.scaleDown}},[a("v-icon",[e._v("mdi-magnify-minus-outline")])],1),e.$vuetify.breakpoint.smAndUp?a("v-text-field",{staticClass:"narrow",attrs:{"hide-details":"",dense:"","single-line":"",outlined:"",value:e.getScale(),clearable:"",suffix:"%",type:"number",step:"10"},on:{input:e.setScale,"click:clear":e.scaleOff}}):e._e(),e.$vuetify.breakpoint.xs?a("v-btn",{attrs:{icon:""},on:{click:e.scaleOff}},[e._v(" 1:1 ")]):e._e(),a("v-btn",{attrs:{icon:""},on:{click:e.scaleUp}},[a("v-icon",[e._v("mdi-magnify-plus-outline")])],1),a("v-spacer"),e._v(" "+e._s(e.numPages)+" Pages "),a("v-progress-linear",{attrs:{active:e.loading,indeterminate:"",absolute:"",bottom:""}})],1),a("div",{staticClass:"pdf-wrap"},e._l(e.numPages,(function(t){return a("pdf",{key:t,class:e.resize?"pdf":"pdf center",attrs:{src:e.pdfsrc(),id:t,page:t,scale:e.scale,resize:e.resize,annotation:""},on:{"update:scale":function(t){e.scale=t},loading:e.loadingChange}})})),1)],1)],1)],1)],1)],1)},je=[],Ve=(a("b680"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{fullscreen:e.$vuetify.breakpoint.smAndDown,persistent:"","max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-chip",e._g({attrs:{color:"primary",label:""}},r),[a("v-icon",{attrs:{left:""}},[e._v("mdi-pencil")]),a("strong",[e._v("EDIT TAGS")])],1)]}}]),model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("Manage Tags")]),a("v-card-subtitle",[e._v(" "+e._s(e.docMeta.title)+" "),a("kbd",{staticClass:"mx-2"},[e._v(e._s(e.docMeta.identifier))])]),a("v-card-text",[e._v(" Has: "),a("v-chip-group",{attrs:{column:""}},e._l(e.docMeta.tags,(function(t){return a("v-chip",{key:t.label+(t.parameter?t.parameter.value:""),attrs:{label:"",close:""},on:{"click:close":function(a){return e.removeTag(t.label)}}},[".."===t.label?a("v-icon",[e._v("mdi-sync")]):a("span",[e._v(e._s(t.label))]),t.parameter?a("v-divider",{staticClass:"mx-3",attrs:{vertical:""}}):e._e(),t.parameter?a("strong",[e._v(e._s("http://www.w3.org/2001/XMLSchema#decimal"===t.parameter.type?t.parameter.value:e.calculateDatestamp(t.parameter.value)))]):e._e()],1)})),1),e._v(" Avaliable: "),a("v-chip-group",{attrs:{column:""}},e._l(e.allTags,(function(t){return a("v-chip",{key:t.label,attrs:{label:""},on:{click:function(a){e.label=t.label}}},[t.parameter?a("v-icon",{staticClass:"mr-3",attrs:{small:""}},[e._v(e._s("http://www.w3.org/2001/XMLSchema#decimal"===t.parameter.type?"mdi-pound":"mdi-calendar"))]):e._e(),".."===t.label?a("v-icon",[e._v("mdi-sync")]):a("span",[e._v(e._s(t.label))])],1)})),1),a("v-divider",{staticClass:"mt-2 mb-3"}),a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{outlined:"",rules:e.labelRules,label:"Label",required:""},model:{value:e.label,callback:function(t){e.label=t},expression:"label"}})],1),a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{outlined:"",rules:e.valRules,label:"Value",required:"",disabled:"simple"===this.type,messages:"simple"===this.type?"Value will be ignored for simple tags":""},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)],1),a("v-row",[a("v-col",{staticClass:"mt-0",attrs:{cols:"12"}},[a("v-radio-group",{staticClass:"mt-0",attrs:{disabled:e.fixed},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[a("v-radio",{attrs:{value:"simple"},scopedSlots:e._u([{key:"label",fn:function(){return[a("v-icon",{attrs:{small:"",left:""}},[e._v("mdi-tag")]),e._v(" Not parameterizable ")]},proxy:!0}])}),a("v-radio",{attrs:{value:"decimal"},scopedSlots:e._u([{key:"label",fn:function(){return[a("v-icon",{attrs:{small:"",left:""}},[e._v("mdi-pound")]),e._v(" Parameterizable with number / decimal ")]},proxy:!0}])}),a("v-radio",{attrs:{value:"date"},scopedSlots:e._u([{key:"label",fn:function(){return[a("v-icon",{attrs:{small:"",left:""}},[e._v("mdi-calendar")]),e._v(" Parameterizable with date ")]},proxy:!0}])})],1)],1)],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"secondary",text:""},on:{click:e.clear}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"primary"},on:{click:e.save}},[e._v("Add")])],1)],1)],1)}),Ce=[],Te=(a("7db0"),a("c7cd"),a("96cf"),a("1da1")),Se=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.allTags=[],e.show=!1,e.valid=!1,e.label="",e.type="simple",e.value="",e.fixed=!1,e.labelRules=[function(e){return!!e||"Label is required"},function(e){return!/\s|\/|\\|#|"|'|,|;|:|\?/.test(e)||"The label must not contain any of the following: whitespace / \\ # \" ' , ; : ?"},function(e){return!/^[.]{1,2}$/.test(e)||"The label must not equal . (single dot) or .. (double dot)"}],e.valRules=[function(t){return"decimal"===e.getType()&&!isNaN(+t)||"decimal"!==e.getType()||"Must be a number"},function(t){return"date"===e.getType()&&/^\d{4}-\d{2}-\d{2}$/.test(t)&&!isNaN(new Date(t).getTime())||"date"!==e.getType()||"Must be a date of format YYYY-MM-DD"}],e}return Object(v["a"])(t,e),Object(c["a"])(t,[{key:"change",value:function(e){var t=this.allTags.find((function(t){return t.label===e}));t?(this.fixed=!0,this.type=t.parameter?"http://www.w3.org/2001/XMLSchema#decimal"===t.parameter.type?"decimal":"date":"simple"):this.fixed=!1}},{key:"getType",value:function(){return this.type}},{key:"clear",value:function(){this.show=!1,this.label="",this.type="simple",this.$refs.form.resetValidation()}},{key:"save",value:function(){var e=Object(Te["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.valid=this.$refs.form.validate(),!this.valid){e.next=18;break}return e.next=4,this.reloadTags();case 4:if(-1===(this.docMeta.tags||[]).findIndex((function(e){return e.label===t.label}))){e.next=9;break}return alert("Tag has already been added to the document"),e.abrupt("return");case 9:if(-1!==this.allTags.findIndex((function(e){return e.label===t.label}))){e.next=17;break}if(!confirm("This tag doesn’t exist yet. Do you want to create it?")){e.next=15;break}return e.next=13,this.server().createTag(this.label,"simple"!==this.type?this.type:void 0).then((function(e){"error"in e&&console.error(e)}));case 13:e.next=17;break;case 15:return this.reload(),e.abrupt("return");case 17:this.server().addTag(this.docMeta.identifier,this.label,"simple"!==this.type?this.type:void 0,"simple"!==this.type?this.value:void 0).then((function(e){e.error?(t.$emit("error",e),t.reload()):(t.$emit("tagadded"),t.reload(),t.$refs.form.reset())}));case 18:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"removeTag",value:function(e){confirm('Do you want to remove tag "'.concat(e,'" from the Document?\nThis Action cannot be undone'))&&this.server().removeTag(this.docMeta.identifier,e).then(this.reload)}},{key:"calculateDatestamp",value:function(e){var t=new Date(e),a=t.getFullYear().toString().padStart(4,"0"),r=(t.getMonth()+1).toString().padStart(2,"0"),n=t.getDate().toString().padStart(2,"0"),i=new Date,o=Math.floor((i.getTime()-t.getTime())/864e5);switch(o){case 0:return"Today";case 1:return"Yesterday";default:return"".concat(a,"-").concat(r,"-").concat(n)}}},{key:"reloadTags",value:function(){var e=this;return this.server().getTags().then((function(t){"error"in t||(e.allTags=t.filter((function(t){return-1===(e.docMeta.tags||[]).findIndex((function(e){return e.label===t.label}))})))}))}},{key:"reload",value:function(){var e=this;this.server().getMeta(this.docMeta.identifier).then((function(t){"error"in t||e.$emit("update:meta",Object(o["a"])({},t,{identifier:e.docMeta.identifier}))})).then((function(){e.reloadTags()}))}},{key:"created",value:function(){this.reload()}}]),t}(f["d"]);Object(p["a"])([Object(f["b"])()],Se.prototype,"server",void 0),Object(p["a"])([Object(f["c"])("meta")],Se.prototype,"docMeta",void 0),Object(p["a"])([Object(f["e"])("label")],Se.prototype,"change",null),Se=Object(p["a"])([Object(f["a"])({})],Se);var De=Se,$e=De,Pe=a("cc20"),Me=a("ef9a"),Ae=Object(O["a"])($e,Ve,Ce,!1,null,null,null),Ie=Ae.exports;V()(Ae,{VBtn:C["a"],VCard:T["a"],VCardActions:S["a"],VCardSubtitle:S["b"],VCardText:S["c"],VCardTitle:S["d"],VChip:Pe["a"],VChipGroup:Me["a"],VCol:D["a"],VContainer:ce["a"],VDialog:$["a"],VDivider:P["a"],VForm:E["a"],VIcon:R["a"],VRadio:ue["a"],VRadioGroup:de["a"],VRow:N["a"],VSpacer:Y["a"],VTextField:q["a"]});var Le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mt-3"},[a("v-card",{attrs:{outlined:"",loading:e.loading}},[e.loading?a("v-card-text",[e._v(" Loading Comments ")]):e.meta.comments&&0!==e.meta.comments.length?e._e():a("v-card-text",[e._v(" No Comments found ")]),e._l(e.meta.comments,(function(t,r){return a("div",{key:t.created},[0!==r?a("v-divider"):e._e(),a("v-card-text",[a("span",{staticStyle:{"white-space":"pre"}},[e._v(e._s(t.text))]),a("code",{staticClass:"ml-2"},[e._v(e._s(t.created.replace("T"," ").replace(/:\d{2}\.\d{1,3}/," ").replace("Z","UTC")))])])],1)}))],2),a("v-form",{ref:"form",staticClass:"d-flex pt-3 align-stretch",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-textarea",{attrs:{outlined:"",rules:e.commentRules,label:"New Comment",required:"",rows:"1","auto-grow":""},model:{value:e.comment,callback:function(t){e.comment=t},expression:"comment"}}),a("v-btn",{staticClass:"ml-1",staticStyle:{height:"unset","margin-bottom":"30px"},attrs:{outlined:""},on:{click:e.add}},[e._v(" Add ")])],1)],1)},Ee=[],Re=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.allTags=[],e.loading=!0,e.comment="",e.valid=!1,e.commentRules=[function(e){return!!e||"Can’t make empty comments"}],e}return Object(v["a"])(t,e),Object(c["a"])(t,[{key:"add",value:function(){var e=Object(Te["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.valid=this.$refs.form.validate(),this.valid&&this.server().addComment(this.docMeta.identifier,this.comment).then((function(){t.$refs.form.reset(),t.reload()}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"calculateDatestamp",value:function(e){var t=new Date(e),a=t.getFullYear().toString().padStart(4,"0"),r=(t.getMonth()+1).toString().padStart(2,"0"),n=t.getDate().toString().padStart(2,"0"),i=new Date,o=Math.floor((i.getTime()-t.getTime())/864e5);switch(o){case 0:return"Today";case 1:return"Yesterday";default:return"".concat(a,"-").concat(r,"-").concat(n)}}},{key:"reload",value:function(){var e=this;this.server().getMeta(this.docMeta.identifier).then((function(t){e.loading=!1,"error"in t||e.$emit("update:meta",Object(o["a"])({},t,{identifier:e.docMeta.identifier}))}))}},{key:"created",value:function(){this.reload()}}]),t}(f["d"]);Object(p["a"])([Object(f["b"])()],Re.prototype,"server",void 0),Object(p["a"])([Object(f["c"])("meta")],Re.prototype,"docMeta",void 0),Re=Object(p["a"])([Object(f["a"])({})],Re);var Fe=Re,Ue=Fe,ze=a("a844"),Ne=Object(O["a"])(Ue,Le,Ee,!1,null,null,null),Ye=Ne.exports;V()(Ne,{VBtn:C["a"],VCard:T["a"],VCardText:S["c"],VDivider:P["a"],VForm:E["a"],VTextarea:ze["a"]});var qe=a("10ee"),We=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.opened=!1,e.console=console,e.page=1,e.numPages=0,e.pdfdata=void 0,e.errors=[],e.scale="page-width",e.loading=!0,e.resize=!0,e}return Object(v["a"])(t,e),Object(c["a"])(t,[{key:"openFirstTime",value:function(){this.opened||(this.opened=!0,this.getPdf(),this.getComments())}},{key:"pdfsrc",value:function(){return{url:(this.server().url.startsWith("https://")||this.server().url.startsWith("http://")?this.server().url:"https://"+this.server().url)+"/doc/"+this.meta.identifier,httpHeaders:{Authorization:this.server().headers.get("Authorization")}}}},{key:"calculateDatestamp",value:function(e){var t=new Date(e),a=t.getFullYear().toString().padStart(4,"0"),r=(t.getMonth()+1).toString().padStart(2,"0"),n=t.getDate().toString().padStart(2,"0"),i=new Date,o=Math.floor((i.getTime()-t.getTime())/864e5);switch(o){case 0:return"Today";case 1:return"Yesterday";default:return"".concat(a,"-").concat(r,"-").concat(n)}}},{key:"openDocument",value:function(e){var t=this.server().url.startsWith("https://")||this.server().url.startsWith("http://")?this.server().url:"https://"+this.server().url;window.open(t+"/doc/"+e,"_blank")}},{key:"deleteDocument",value:function(e){var t=this;if(confirm("Are you sure you want to delete this Document?")){this.show=!1;var a=this.server();a&&a.deleteDocument(e).then((function(e){"error"in e?t.err=Object(o["a"])({title:e.error,message:e.message},e):t.$emit("change")}))}}},{key:"updateTitle",value:function(){var e=this.server();e&&e.setDocumentTitle(this.meta.identifier,this.meta.title||"")}},{key:"loadingChange",value:function(e){if(this.loading=e,!e||e)for(var t=document.getElementsByTagName("canvas"),a=0;a<t.length;a++)t[a].classList.add("elevation-4")}},{key:"scaleDown",value:function(){this.resize=!1,this.scale=parseFloat(""+this.scale),this.scale>.1?this.scale=(this.scale-.1).toFixed(1):this.scale=.1}},{key:"scaleUp",value:function(){this.resize=!1,this.scale=parseFloat(""+this.scale),this.scale<1.9?this.scale=(this.scale+.1).toFixed(1):this.scale=2}},{key:"scaleOff",value:function(){this.scale="page-width",this.resize=!0}},{key:"getScale",value:function(){return parseInt(""+100*+this.scale)}},{key:"setScale",value:function(e){this.scale=e/100}},{key:"getPdf",value:function(){var e=this,t=(this.server().url.startsWith("https://")||this.server().url.startsWith("http://")?this.server().url:"https://"+this.server().url)+"/doc/"+this.meta.identifier;this.pdfdata=qe["a"].createLoadingTask({url:t,httpHeaders:{Authorization:this.server().headers.get("Authorization")}}),this.pdfdata.then((function(t){e.numPages=t.numPages}))}},{key:"getComments",value:function(){}}]),t}(f["d"]);Object(p["a"])([Object(f["b"])()],We.prototype,"server",void 0),Object(p["a"])([Object(f["c"])("docMeta")],We.prototype,"meta",void 0),Object(p["a"])([Object(f["c"])("error")],We.prototype,"err",void 0),Object(p["a"])([Object(f["c"])("open")],We.prototype,"show",void 0),Object(p["a"])([Object(f["e"])("show")],We.prototype,"openFirstTime",null),We=Object(p["a"])([Object(f["a"])({components:{pdf:qe["a"],TagAdder:Ie,CommentsList:Ye}})],We);var Be=We,Ge=Be,He=(a("b14c"),a("8e36")),Xe=Object(O["a"])(Ge,Oe,je,!1,null,null,null),Je=Xe.exports;V()(Xe,{VBtn:C["a"],VCard:T["a"],VCardSubtitle:S["b"],VCardText:S["c"],VCardTitle:S["d"],VChip:Pe["a"],VChipGroup:Me["a"],VCol:D["a"],VDialog:$["a"],VDivider:P["a"],VIcon:R["a"],VProgressLinear:He["a"],VRow:N["a"],VSpacer:Y["a"],VTextField:q["a"],VToolbar:W["a"],VToolbarTitle:B["b"]});var Ze=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.error=null,e.console=console,e.servers=[],e._current=0,e.search="",e.drawer=null,e.navItems=[{text:"More",model:!1,children:[{icon:"mdi-package-down",text:"Export",disabled:!0},{icon:"mdi-github",text:"Code on GitHub",href:"https://github.com/tridoc/tridoc-cockpit"},{icon:"mdi-help-circle",text:"Help",disabled:!0}]}],e.docs=[],e.open="",e.count=0,e.headers=[{text:"Title",value:"title"},{text:"Tags",value:"tags"},{text:"Created",value:"created",align:"end"},{text:"",value:"actions",width:1}],e.loading=!0,e.options={page:1,itemsPerPage:10},e.uploadDocs=[],e.uploadHeaders=[{text:"Name",value:"file.name"},{text:"",value:"actions",width:1}],e.tags=[],e}return Object(v["a"])(t,e),Object(c["a"])(t,[{key:"current",value:function(){return this._current>=this.servers.length&&(this._current=this.servers.length-1),this._current}},{key:"setCurrent",value:function(e){this._current=e}},{key:"currentserver",value:function(){return 0===this.servers.length?null:this.servers[this.current()].server}},{key:"paginationFirst",value:function(){this.options.page=1,this.getDocuments()}},{key:"paginationPrev",value:function(){this.options.page-=1,this.getDocuments()}},{key:"paginationNext",value:function(){this.options.page+=1,this.getDocuments()}},{key:"paginationLast",value:function(){this.options.page=Math.ceil(this.count/this.options.itemsPerPage),this.$nextTick().then(this.getDocuments)}},{key:"docscounter",value:function(){return"".concat(Math.min((this.options.page-1)*this.options.itemsPerPage+1,this.count),"—").concat(Math.min(this.options.page*this.options.itemsPerPage,this.count)," of ").concat(this.count)}},{key:"pagecounter",value:function(){return"".concat(this.options.page," of ").concat(Math.ceil(this.count/this.options.itemsPerPage))}},{key:"openDocument",value:function(e){var t=this.servers[this.current()].url.startsWith("https://")||this.servers[this.current()].url.startsWith("http://")?this.servers[this.current()].url:"https://"+this.servers[this.current()].url;window.open(t+"/doc/"+e,"_blank")}},{key:"calculateTimestamp",value:function(e){var t=new Date(e),a=t.getFullYear().toString().padStart(4,"0"),r=(t.getMonth()+1).toString().padStart(2,"0"),n=t.getDate().toString().padStart(2,"0"),i=t.getHours().toString().padStart(2,"0"),o=t.getMinutes().toString().padStart(2,"0"),s=new Date,l=Math.floor((s.getTime()-t.getTime())/864e5);switch(l){case 0:return"Today ".concat(i,":").concat(o);case 1:return"Yesterday ".concat(i,":").concat(o);default:return"".concat(a,"-").concat(r,"-").concat(n," ").concat(i,":").concat(o)}}},{key:"calculateDatestamp",value:function(e){var t=new Date(e),a=t.getFullYear().toString().padStart(4,"0"),r=(t.getMonth()+1).toString().padStart(2,"0"),n=t.getDate().toString().padStart(2,"0"),i=new Date,o=Math.floor((i.getTime()-t.getTime())/864e5);switch(o){case 0:return"Today";case 1:return"Yesterday";default:return"".concat(a,"-").concat(r,"-").concat(n)}}},{key:"getDocuments",value:function(){var e=this;this.loading=!0;var t=this.currentserver();if(t){var a,r,n="",i=[],l=[];this.search&&(Object(s["a"])(this.search.matchAll(/(^|[^\\#])#([^#\s/\\#"',;:?]+)\b/g)).forEach((function(e){return i.push(e[2])})),Object(s["a"])(this.search.matchAll(/(^|[^\\])##([^#\s/\\#"',;:?]+)\b/g)).forEach((function(e){return l.push(e[2])})),n=this.search.replace(/((^|[^\\#])#|(^|[^\\])##)[^#\s/\\#"',;:?]+\b/g," ").replace(/\s+/," ").replace(/\\#/,"#").trim()),t.countDocuments(n,i,l).then((function(t){"number"===typeof t?(e.count=t,e.options.page=Math.min(e.options.page,Math.ceil(e.count/e.options.itemsPerPage)),0===t&&(e.loading=!1)):e.error=Object(o["a"])({},t)})),this.options.itemsPerPage>0&&(a=this.options.itemsPerPage,r=(this.options.page-1)*a),t.getDocuments(n,i,l,a,r).then((function(a){"error"in a?e.error=Object(o["a"])({},a):(e.docs=a.map((function(e){var t=e.identifier,a=e.title,r=e.created;return a=a||"",{identifier:t,title:a,created:r,tags:[{label:".."}]}})),e.docs.forEach((function(a){t.getTags(a.identifier).then((function(t){"error"in t?e.error=Object(o["a"])({title:t.error},t):a.tags=t,e.loading=!1}))})))}))}}},{key:"updateDoc",value:function(e){this.docs.splice(this.docs.findIndex((function(t){return t.identifier===e.identifier})),1,e)}},{key:"addFile",value:function(e){var t,a=this,r=null===(t=e.dataTransfer)||void 0===t?void 0:t.files;r&&Object(s["a"])(r).forEach((function(e){"application/pdf"===e.type&&a.uploadDocs.push({loading:!1,file:e})}))}},{key:"addFileInput",value:function(e){var t=this,a=e.target.files;a&&(Object(s["a"])(a).forEach((function(e){"application/pdf"===e.type&&t.uploadDocs.push({loading:!1,file:e})})),e.target.value="",e.target.files=null)}},{key:"uploadAll",value:function(){this.uploadDocs.forEach(this.uploadDocument)}},{key:"uploadDocument",value:function(e){var t=this,a=this.currentserver();a&&(e.loading=!0,a.uploadFile(e.file).then((function(r){"error"in r?t.error={title:"Could upload document",message:r.error}:a.setDocumentTitle(r.location.substring(r.location.lastIndexOf("/")+1),e.file.name.replace(/\.pdf$/,"")).then((function(a){"string"!==typeof a&&a.error&&(t.error={title:"Could not set title",message:a.error}),t.reload(),t.removeUploadDocument(e)}))}),(function(e){t.error={title:e.error||e,message:e.message||e}})).finally((function(){e.loading=!1})))}},{key:"removeUploadDocument",value:function(e){this.uploadDocs=this.uploadDocs.filter((function(t){return t!==e}))}},{key:"deleteTag",value:function(e){var t=this,a=this.currentserver();a&&a.deleteTag(e).then((function(e){e.error?t.error=Object(o["a"])({message:e.error},e):t.reload()}))}},{key:"serverchange",value:function(e){var t=e.index,a=e.url,r=e.password;this.servers[t]={url:a,password:r,server:new h.a(a,"tridoc",r)},this.setCurrent(t),this.store(),this.reload()}},{key:"serverremove",value:function(e){this.servers.splice(e,1),this.store(),this.reload()}},{key:"reload",value:function(){var e=this;this.reset(),this.getDocuments();var t=this.currentserver();t&&t.getTags().then((function(t){"error"in t?e.error=Object(o["a"])({title:t.error,message:t.message},t):(e.tags=t.map((function(e){var t={icon:"mdi-tag",label:e.label,"type-icon":""};if(e.parameter)switch(e.parameter.type){case"http://www.w3.org/2001/XMLSchema#decimal":t["type-icon"]="mdi-pound";break;case"http://www.w3.org/2001/XMLSchema#date":t["type-icon"]="mdi-calendar";break;default:break}return t})),e.tags.sort((function(e,t){var a=e.label.toUpperCase(),r=t.label.toUpperCase();return a<r?-1:a>r?1:0})))}),(function(t){t instanceof Error?e.error={title:"A "+t.name+" occurred",message:t.message}:e.error=Object(o["a"])({message:t},t)}))}},{key:"reset",value:function(){this.tags=[],this.docs=[]}},{key:"restore",value:function(){var e=JSON.parse(localStorage.getItem("servers")||""),t=parseInt(localStorage.getItem("currentserver")||"0");e&&(this.servers=e.map((function(e){var t=e.password,a=e.url;return{password:t,url:a,server:new h.a(a,"tridoc",t)}}))),this.setCurrent(t);var a=localStorage.getItem("server"),r=localStorage.getItem("password");a&&r&&this.servers.push({password:r,url:a,server:new h.a(a,"tridoc",r)})}},{key:"store",value:function(){localStorage.setItem("currentserver",this.current().toString()),localStorage.setItem("servers",JSON.stringify(this.servers.map((function(e){var t=e.password,a=e.url;return{password:t,url:a}}))))}},{key:"created",value:function(){this.restore(),this.reload()}},{key:"onError",value:function(e){var t=e.title,a=e.message;this.error={title:t,message:a}}}]),t}(f["d"]);Ze=Object(p["a"])([Object(f["a"])({components:{SettingsDialog:H,ErrorDialog:te,TagList:xe,DocumentDetails:Je}})],Ze);var Ke=Ze,Qe=Ke,et=(a("b107"),a("5c64"),a("7496")),tt=a("40dc"),at=a("5bc1"),rt=a("a75b"),nt=a("8fea"),it=a("56b0"),ot=a("f774"),st=a("3a2f"),lt=Object(O["a"])(Qe,n,i,!1,null,"180a4763",null),ct=lt.exports;V()(lt,{VApp:et["a"],VAppBar:tt["a"],VAppBarNavIcon:at["a"],VBtn:C["a"],VCard:T["a"],VChip:Pe["a"],VChipGroup:Me["a"],VCol:D["a"],VContainer:ce["a"],VContent:rt["a"],VDataTable:nt["a"],VDivider:P["a"],VIcon:R["a"],VList:be["a"],VListGroup:it["a"],VListItem:F["a"],VListItemAction:ge["a"],VListItemContent:U["a"],VListItemSubtitle:U["b"],VListItemTitle:U["c"],VNavigationDrawer:ot["a"],VRow:N["a"],VSpacer:Y["a"],VTextField:q["a"],VToolbarTitle:B["b"],VTooltip:st["a"]});var ut=a("f309"),dt=a("fcf4");r["a"].use(ut["a"]);var vt=new ut["a"]({theme:{themes:{light:{primary:"#00685b",secondary:"#c86852",accent:"#f86158",error:dt["a"].red.base},dark:{primary:{base:"#00887b",darken1:"#00887b"},secondary:{base:"#ec8d79",darken1:"#ffb39b"},accent:"#f86158",error:dt["a"].red.base}}}});r["a"].config.productionTip=!1,new r["a"]({vuetify:vt,render:function(e){return e(ct)}}).$mount("#app")},dbb7:function(e,t,a){},dfa5:function(e,t,a){}});
//# sourceMappingURL=app.fa54a892.js.map