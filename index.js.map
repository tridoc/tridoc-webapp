{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/server.js","webpack:///./src/js/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Server","url","username","password","_classCallCheck","this","startsWith","headers","Headers","set","btoa","postHeaders","id","label","type","body","parameter","fetch","method","JSON","stringify","then","json","query","tagsQuery","notTagsQuery","encodeURIComponent","limit","offset","console","log","title","file","Promise","reject","pdfHeaders","status","success","location","error","statusCode","pdfjsLib","window","GlobalWorkerOptions","workerSrc","urlInput","document","getElementById","usernameInput","passwordInput","saveButton","searchInput","searchLoader","createElement","classList","add","documentContainer","documentLoader","storage","localStorage","getItem","server","renderPages","pdf","pageNumber","arguments","length","undefined","max","container","nopreview","getPage","page","concat","canvas","unscaledViewport","getViewport","scale","height","viewBox","width","scaledWidth","offsetWidth","scaledHeight","scaledViewport","context","getContext","renderContext","canvasContext","viewport","render","promise","parentNode","removeChild","appendChild","numPages","innerHTML","getDocument","httpHeaders","Authorization","reason","e","errorElem","textContent","message","getTags","querySelectorAll","forEach","dest","closest","getAttribute","loader","array","list","sort","a","b","localeCompare","icon","valueIndicator","catch","fillout","documentTitle","getElementsByClassName","setAttribute","searchDocuments","regx","re","string","join","match","exec","tagsregex","nottagsregex","replace","tags","notTags","isNaN","getDocuments","identifier","documentListEntry","tagsHere","addEventListener","element","serverAddress","setItem"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","export default class Server {\n    constructor(url, username, password) {\n        if (url.startsWith(\"http\")) {\n            this.url = url;\n        } else {\n            this.url = \"https://\" + url;\n        }\n\n        this.headers = new Headers();\n        if (username && password) {\n            this.headers.set('Authorization', 'Basic ' + btoa(username + \":\" + password));\n        }\n        this.postHeaders = new Headers();\n        this.postHeaders.set('Authorization', this.headers.get('Authorization'));\n        this.postHeaders.set('Content-Type', 'application/json');\n    }\n\n    addTag(id, label, type, value) {\n        let body = {\n            'label': label\n        };\n        if (type) {\n            body.parameter = {\n                \"type\": \"http://www.w3.org/2001/XMLSchema#\" + type,\n                \"value\": value\n            };\n        }\n        return fetch(this.url + \"/doc/\" + id + \"/tag\", {\n            method: \"POST\",\n            headers: this.postHeaders,\n            body: JSON.stringify(body)\n        }).then(r => r.json());\n    }\n\n    countDocuments(query, tagsQuery, notTagsQuery) {\n        return fetch(this.url + \"/count?text=\" + encodeURIComponent(query) + tagsQuery + notTagsQuery, {\n            headers: this.headers\n        }).then(r => r.json());\n    }\n\n    createTag(label, type) {\n        let body = {\n            'label': label\n        };\n        if (type) {\n            body.parameter = {\n                \"type\": \"http://www.w3.org/2001/XMLSchema#\" + type\n            };\n        }\n        return fetch(this.url + \"/tag\", {\n            method: \"POST\",\n            headers: this.postHeaders,\n            body: JSON.stringify(body)\n        }).then(r => r.json());\n    }\n\n    deleteDocument(id) {\n        return fetch(this.url + \"/doc/\" + id, {\n            method: \"DELETE\",\n            headers: this.headers\n        });\n    }\n\n    deleteTag(label) {\n        return fetch(this.url + \"/tag/\" + encodeURIComponent(label), {\n            method: \"DELETE\",\n            headers: this.headers\n        }).then(r => r.json());\n    }\n\n    getDocuments(query, tagsQuery, notTagsQuery, limit, offset) {\n        const url = this.url + \"/doc?text=\" + query + tagsQuery + notTagsQuery + \"&limit=\" + limit + \"&offset=\" + offset;\n        console.log(url);\n        return fetch(url, {\n            headers: this.headers\n        }).then(r => r.json());\n    }\n\n    getTags(id) {\n        return id ? fetch(this.url + \"/doc/\" + id + \"/tag\", {\n            headers: this.headers\n        }).then(r => r.json()) : fetch(this.url + \"/tag\", {\n            headers: this.headers\n        }).then(r => r.json());\n    }\n\n    removeTag(id, label) {\n        return fetch(this.url + \"/doc/\" + id + \"/tag/\" + label, {\n            method: \"DELETE\",\n            headers: this.headers\n        });\n    }\n\n    setDocumentTitle(id, title) {\n        let body = {\n            'title': title\n        };\n        return fetch(this.url + \"/doc/\" + id + \"/title\", {\n            method: \"PUT\",\n            headers: this.postHeaders,\n            body: JSON.stringify(body)\n        })\n    }\n\n    uploadFile(file) {\n        if (file.type != \"application/pdf\") {\n            return Promise.reject(\"Please provide a pdf document\")\n        } else {\n            let pdfHeaders = new Headers();\n            pdfHeaders.set('Authorization', this.headers.get('Authorization'));\n            pdfHeaders.set('Content-Type', 'application/pdf');\n            return fetch(this.url + \"/doc\", {\n                method: \"POST\",\n                headers: pdfHeaders,\n                body: file\n            }).then(r => {\n                if (r.status >= 400) {\n                    return r.json();\n                } else {\n                    return {\n                        success: true,\n                        location: r.headers.get(\"Location\")\n                    };\n                }\n            }).then(json => {\n                if (json.error) {\n                    throw (\"Server responded with \" + json.statusCode + \": \" + json.error);\n                } else {\n                    return json;\n                }\n            });\n        }\n    }\n}","import Server from './server';\n\n// Loaded via <script> tag, create shortcut to access PDF.js exports.\nvar pdfjsLib = window['pdfjs-dist/build/pdf'];\npdfjsLib.GlobalWorkerOptions.workerSrc = '//mozilla.github.io/pdf.js/build/pdf.worker.js';\n\nconst urlInput = document.getElementById('server-url');\nconst usernameInput = document.getElementById('server-username');\nconst passwordInput = document.getElementById('server-password');\nconst saveButton = document.getElementById('server-save');\n\nconst searchInput = document.getElementById('search-documents');\nconst searchLoader = document.createElement('div');\nsearchLoader.classList.add('loader');\n\nconst documentContainer = document.getElementById('document');\nconst documentText = document.getElementById('pdf-text');\nconst documentLoader = document.createElement('div');\ndocumentLoader.classList.add('loader');\n\nconst storage = localStorage;\n\nif (storage.getItem('server')) {\n    urlInput.value = storage.getItem('server');\n} else {\n    urlInput.value = 'http://localhost:8000';\n}\n\nif (storage.getItem('username')) {\n    usernameInput.value = storage.getItem('username');\n}\n\nif (storage.getItem('password')) {\n    passwordInput.value = storage.getItem('password');\n}\n\nlet server = new Server(urlInput.value, usernameInput.value, passwordInput.value);\n\nconst generateError = (e) => {\n    const errorElem = document.createElement('div');\n    errorElem.classList = 'error';\n    errorElem.textContent = e.status ? `Error ${e.status}: ${e.message ? e.message : e}` : e;\n    return errorElem;\n}\n\nconst renderPages = (pdf, pageNumber = 1, max = -1, container = documentContainer) => {\n    const nopreview = container === documentContainer;\n    pdf.getPage(pageNumber).then(function (page) {\n        console.log(`Page ${pageNumber} loaded`);\n\n        const canvas = document.createElement('canvas');\n        canvas.classList.add('pdf-canvas');\n\n        let unscaledViewport = page.getViewport({\n            scale: 1\n        });\n\n        unscaledViewport.height = unscaledViewport.height || unscaledViewport.viewBox[3]\n        unscaledViewport.width = unscaledViewport.width || unscaledViewport.viewBox[2];\n\n        const scaledWidth = container.offsetWidth;\n        const scale = scaledWidth / unscaledViewport.width;\n        const scaledHeight = unscaledViewport.height * scale;\n\n        let scaledViewport = page.getViewport({\n            scale: scale\n        });\n\n        // Prepare canvas using PDF page dimensions\n        var context = canvas.getContext('2d');\n        canvas.height = scaledHeight;\n        canvas.width = scaledWidth;\n\n        // Render PDF page into canvas context\n        var renderContext = {\n            canvasContext: context,\n            viewport: scaledViewport\n        };\n        var renderTask = page.render(renderContext);\n        renderTask.promise.then(function () {\n            if (documentLoader.parentNode && nopreview) documentLoader.parentNode.removeChild(documentLoader);\n            container.appendChild(canvas);\n            console.log(`Page ${pageNumber} of ${max > -1 ? max : pdf.numPages} rendered`);\n            if (pageNumber < pdf.numPages && (max === -1 || pageNumber < max)) {\n                if (nopreview) container.appendChild(documentLoader);\n                renderPages(pdf, pageNumber + 1, max, container);\n            } else console.log('Finished rendering PDF');\n        });\n    });\n}\n\nconst render = (id) => {\n    documentContainer.innerHTML = '';\n    documentContainer.appendChild(documentLoader);\n\n    const url = server.url + '/doc/' + id;\n    console.log(`Rendering ${url}`);\n    var loadingTask = pdfjsLib.getDocument({\n        url: url,\n        httpHeaders: {\n            'Authorization': server.headers.get('Authorization')\n        }\n    });\n    loadingTask.promise.then(function (pdf) {\n        console.log('PDF loaded');\n        renderPages(pdf);\n    }, function (reason) {\n        if (documentLoader.parentNode) documentLoader.parentNode.removeChild(documentLoader);\n        documentContainer.appendChild(generateError(reason));\n    });\n}\n\nconst renderPreview = (element) => {\n    const id = element.getAttribute('data-document-id');\n    const url = server.url + '/doc/' + id;\n    console.log(`Rendering preview of ${url}`);\n    var loadingTask = pdfjsLib.getDocument({\n        url: url,\n        httpHeaders: {\n            'Authorization': server.headers.get('Authorization')\n        }\n    });\n    loadingTask.promise.then(function (pdf) {\n        console.log('PDF loaded');\n        renderPages(pdf, 1, 1, element);\n    }, function (reason) {\n        // PDF loading error\n        console.error(reason);\n    });\n}\n\nfunction getTags() {\n    document.querySelectorAll('.s__th').forEach((dest) => {\n        const id = dest.closest('.s__id').getAttribute('data-document-id');\n        if (!id) return;\n        const loader = document.createElement(\"div\")\n        loader.classList = 'loader loader-small inline'\n        dest.appendChild(loader);\n        server.getTags(id).then(array => {\n            let list = '';\n            if (array.error) {\n                dest.innerHTML = 'Error: ' + array.error;\n            } else if (array.length > 0) {\n                array.sort(function (a, b) {\n                    return a.label.localeCompare(b.label);\n                })\n                array.forEach(a => {\n                    let type = 'simple';\n                    let icon = 'mi-tag';\n                    let value;\n                    if (a.parameter) {\n                        value = a.parameter.value;\n                        if (a.parameter.type == 'http://www.w3.org/2001/XMLSchema#decimal') {\n                            type = 'decimal';\n                            icon = 'mi-num';\n                        } else if (a.parameter.type == 'http://www.w3.org/2001/XMLSchema#date') {\n                            type = 'date';\n                            icon = 'mi-cal';\n                        }\n                    }\n                    const valueIndicator = value ? '<span class=\"tag-value\">' + value + '</span>' : '';\n                    list = list + `<div class='tag' data-tag-type='${type}' data-tag-label='${a.label}'>\n                        <i class='tag-icon ${icon}'>${type}</i>\n                        <span class=\"tag-text\">${a.label}</span>\n                        ${valueIndicator}\n                        </div>`;\n                });\n                dest.innerHTML = list;\n                /*if (list != '') {\n                    document.querySelectorAll('.tag').forEach(element => element.addEventListener('click', tagFillout));\n                }*/\n            } else {\n                list = '<i>No Tags</i>';\n                dest.innerHTML = list;\n            }\n        }).catch(e => {\n            dest.innerHTML = 'Error: ' + e;\n        });\n    });\n}\n\nfunction fillout() {\n    console.log('Fillout');\n    let documentTitle = this.getElementsByClassName('s__t')[0].innerHTML;\n    let id = this.getAttribute('data-document-id');\n    let title = document.getElementById('current-title');\n    title.innerHTML = documentTitle === id ? `<i>Untitled Document <code>${id}<code></i>` : documentTitle;\n    document.getElementsByClassName('main')[0].setAttribute('data-document-id', id);\n    getTags();\n    render(id);\n}\nconst searchDocuments = (page) => {\n    let dest = document.getElementById('document-list');\n    dest.innerHTML = '';\n    dest.appendChild(searchLoader);\n\n    function regx(re, string, join = ', ') {\n        const match = re.exec(string);\n        return match ? join + match[1] + regx(re, string, join) : '';\n    }\n    const value = ' ' + searchInput.value;\n    const tagsregex = /[^!#\\\\\\b]\\B#([^\\s\"',;:]+?(?=\\s|$))/g;\n    const nottagsregex = /[^#\\\\]\\B!#([^\\s\"',;:]+?(?=\\s|$))/g;\n    const query = value ? encodeURIComponent(value.replace(tagsregex, '').replace(nottagsregex, '').replace(/^ /,'').replace(/\\\\/,'')) : '';\n    const tags = regx(tagsregex, value, '&tag=');\n    let notTags = regx(nottagsregex, value, '&nottag=');\n    let tagsQuery = tags ? tags : '';\n    let notTagsQuery = notTags ? notTags : '';\n    if (isNaN(page)) {\n        page = 0\n    }\n    let limit = ((storage.getItem('limit') > 0) ? storage.getItem('limit') : '');\n    let offset = page * limit;\n    let to = 0;\n\n    server.getDocuments(query, tagsQuery, notTagsQuery, limit, offset).then(array => {\n        let list = '';\n        if (array.error) {\n            dest.innerHTML = array.error;\n        } else if (array.length > 0) {\n            array.forEach(a => {\n                let label = a.title ? a.title : a.identifier;\n                const documentListEntry = document.createElement('button');\n                documentListEntry.classList = 'list-item list-item-flexible fillout-button s__id';\n                documentListEntry.setAttribute('data-document-id', a.identifier);\n                const title = document.createElement('h2');\n                title.classList = 's__t';\n                title.innerHTML = label;\n                documentListEntry.appendChild(title);\n                const tagsHere = document.createElement('div');\n                tagsHere.classList = 's__th';\n                documentListEntry.appendChild(tagsHere);\n                documentListEntry.addEventListener('click', fillout);\n                //renderPreview(documentListEntry); currently crashes browser\n                searchLoader.parentNode.removeChild(searchLoader);\n                dest.appendChild(documentListEntry);\n                dest.appendChild(searchLoader);\n            });\n            searchLoader.parentNode.removeChild(searchLoader);\n        } else {\n            let label1 = query ? \" Nothing Found\" : \" Documents will appear here\";\n            let label2 = query ? \"You can try another query\" : \"Upload something\";\n            list = \"<div class=''>\" +\n                \"\" +\n                \"<div class='list-content'>\" +\n                \"<h3 class='mdc-typography--headline5'><span class='material-icons'>blur_off</span>\" + label1 + \"</h3>\" +\n                \"<span class='mdc-typography--subtitle1'>\" + label2 + \"</span>\" +\n                \"</div>\" +\n                \"</div>\";\n            dest.innerHTML = list;\n        }\n        document.querySelectorAll('.page-switch').forEach(element => element.addEventListener('click', () => {\n            searchDocuments(element.getAttribute('data-pagination-target'));\n        }));\n        getTags();\n    }).catch(e => {\n        console.log(e);\n    });\n}\n\nconst saveServer = () => {\n    let serverAddress = urlInput.value;\n    server = new Server(serverAddress, usernameInput.value, passwordInput.value);\n    try {\n        storage.setItem('server', serverAddress);\n        storage.setItem('username', usernameInput.value);\n        storage.setItem('password', passwordInput.value);\n    } catch (error) {\n        console.log(error)\n    }\n    searchDocuments();\n}\n\n/* - EVENT LISTENERS - */\n\nsaveButton.addEventListener('click', saveServer);\nsearchInput.addEventListener('keydown', e => {\n    if (e.key === 'Enter') searchDocuments()\n});\n\n/* - ON LOAD - */\n\nsearchDocuments();"],"sourceRoot":""}